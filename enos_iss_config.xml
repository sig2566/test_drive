<?xml version="1.0"?>
<root>
<targets_list>

 
  <target
    name="UEP_UTL_14_132_ISS"
	ip="172.16.14.132"
    uid="root"
    passw="root"
    info="UTL test board"
    >
    <prolog>
    	<cmd>'killall ISS.exe'</cmd>
    	<cmd>'cd /opt/uep/apps/'</cmd>
    	<cmd final= "enos login:" timeout_action="new_line">'./AppInit_nicISS'</cmd>
    	<cmd final="Password:">'root'</cmd>
    	<cmd final="enos">'admin123'</cmd>
     </prolog>
    <epilog>
    </epilog> 
  </target>
  
  
  
  <target
    name="UEP_TELNET_ISS"
	ip="172.16.15.61"
    uid="devops"
    passw="devops123"
    target_ip="172.16.15.186"
    info="Test board in ENOS mode using telnet"
    >
    <prolog>
 	   <cmd final= "enos login:" timeout_action="new_line">'telnet '+ obj.target_ip</cmd>
     	<cmd final="Password:">'root'</cmd>
    	<cmd final="enos">'admin123'</cmd>  
    </prolog>
    <epilog>
    </epilog> 
  </target>
  
  
 </targets_list> 

<actions_list>

  	<action
		name= "iss_version_test"
		func= "exec_cmdlist"
		>
		<cmd final= "enos" pass="Hardware Details.*Software Details"> 'show system information'</cmd>
	</action> 

  	<action
		name= "iss_tftp_upgrade_immediate_activate_test"
		func= "exec_cmdlist"
		protocol_ip="tftp://172.16.15.61/"
		bundle_name = "swupdate_uep2025.raucb"
		>
		<cmd final= "enos" pass="Installing .* succeeded"
		> 'firmware download ' + obj.protocol_ip + obj.bundle_name</cmd>
		<cmd final= "Are you sure you want to perform firmware activate procedure?" 
		     > 'firmware activate immediate database migrate on'</cmd>		     
			<cmd final="The system is going down for reboot NOW!"
			>'Y'</cmd>
	</action> 
<!--	
   	<action
		name= "enos_mode_set"
		func= "exec_cmdlist"
		target=
		>
		<cmd final= "enos" pass="Installing .* succeeded"
		> 'firmware download ' + obj.protocol_ip + obj.bundle_name</cmd>
		<cmd final= "Are you sure you want to perform firmware activate procedure?" 
		     > 'firmware activate immediate database migrate on'</cmd>		     
			<cmd final="The system is going down for reboot NOW!"
			>'Y'</cmd>
	</action> 
 
-->

</actions_list>

<sessions_list>

     <!-- Check system information print  -->
     <session
        name="ISS_VERSION_TST"
        host = "build_VM_61"
        target="UEP_UTL_14_132_ISS"
		timeout= "9600"
        iterations= "1"
         >
        <action>iss_version_test</action>	
        
     </session>    

 	<!-- ISS immideate upgrade from tftp server -->
      <session
        name="ISS_IMMIDEATE_UPGRADE_TFTP_TST"
        host = "build_VM_61"
        target="UEP_UTL_14_132_ISS"
		timeout= "4600"
        iterations= "1"
        sw_update_file="swupdate_utl.rauc"
         >
        <action>iss_tftp_upgrade_immediate_activate_test</action>
        <action>alive_wait</action>		
        <session>ISS_VERSION_TST</session>
     </session>    

 	<!-- ISS immideate upgrade from tftp server -->
      <session
        name="ISS_IMMIDEATE_UPGRADE_TFTP_TST_UEP2025"
		ip= "172.16.15.186"
		bundle_name = "swupdate_uep2025.raucb"
		 >
        <session>ISS_IMMIDEATE_UPGRADE_TFTP_TST</session>
    </session>    

     
          <!-- ISS SW update & race condition with reboot test  -->
     <session
        name="LINUX_SW_UPDATE_ISS_RACE_TST"
        host = "build_VM_61"
		timeout= "9600"
		bundle_name = "swupdate_uep2025.raucb"
        iterations= "1"
        >
        <thread_session target="UEP_UTL_14_132" ip= "172.16.15.186"
	        start_time="120"
	        end_time="180"         
	        >RANDOM_DELAY_REBOOT</thread_session>
	        
        <session target="UEP_UTL_14_132_ISS">ISS_IMMIDEATE_UPGRADE_TFTP_TST_UEP2025</session>	
        <session target="UEP_UTL_14_132_ISS" ip="172.16.15.186" >ISS_VERSION_TST</session>	
     </session>       		
</sessions_list>
</root>
